# GraphQL VK API schema

GraphQL schema for working with vk.com API.

Project based on [IamNotUrKitty/graphql-vk-api](https://github.com/IamNotUrKitty/graphql-vk-api).

## Requirements

* NodeJS 14.x+
* NPM 6.x+

## How to use

Copy .env.dist to .env:

```shell
cp .env.dist .env
```

Fix settings via editor, you need to change at least `VK_API_KEY` variable.

```shell
nano .env
```

Run server:

```shell
npm run start
```

Open http://localhost:3000/graphql and enjoy :)

## Environment variables

| Name         | Default  | Description                                            |
|--------------|----------|--------------------------------------------------------|
| APP_BIND     | 0.0.0.0  | Address of interface on which need to bind application |
| APP_PORT     | 3000     | Number of an application port                          |
| APP_ENDPOINT | /graphql | Path to GraphQL endpoint                               |
| VK_API_KEY   |          | access_key generated by OAuth 2.0 gateway              |

## Example

Example GraphQl query:

```graphql
{
    user(user_id:"1"){
        first_name
        last_name
        friends(count:5){
            id
            domain
        }
        groups(count:5){
            id
            name
        }
        albums{
            title
            photos(count:3){
                photo_75
            }
        }
    }
}
```

Result will be like:

```json
{
  "data": {
    "user": {
      "first_name": "Павел",
      "last_name": "Дуров",
      "friends": [],
      "groups": [
        {
          "id": "78051184",
          "name": "Идеи для дома"
        },
        {
          "id": "78051345",
          "name": "Ням-ням, пальчики оближешь"
        },
        {
          "id": "33368629",
          "name": "Я Миллиардер"
        }
      ],
      "albums": [
        {
          "title": "Здесь будут новые фотографии для прессы-службы",
          "photos": [
            {
              "photo_75": "https://sun9-58.userapi.com/c9591/u00001/136592355/s_47267f71.jpg"
            },
            {
              "photo_75": "https://sun9-40.userapi.com/c9591/u00001/136592355/s_2606f012.jpg"
            },
            {
              "photo_75": "https://sun9-82.userapi.com/c9591/u00001/136592355/s_39db64b7.jpg"
            }
          ]
        }
      ]
    }
  }
}
```

## Tests

```shell
npm test
```
